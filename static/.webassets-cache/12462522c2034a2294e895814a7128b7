V"use strict";$(function(){$('#slide-nav.navbar-inverse').after($('<div class="inverse" id="navbar-height-col"></div>'));$('#slide-nav.navbar-default').after($('<div id="navbar-height-col"></div>'));var toggler='.navbar-toggle';var pagewrapper='#page-content';var navigationwrapper='.navbar-header';var menuwidth='100%';var slidewidth='30%';var menuneg='-100%';var slideneg='-30%';$("#slide-nav").on("click",toggler,function(e){var selected=$(this).hasClass('slide-active');$('#slidemenu').stop().animate({left:selected?menuneg:'0px'});$('#navbar-height-col').stop().animate({left:selected?slideneg:'0px'});$(pagewrapper).stop().animate({left:selected?'0px':slidewidth});$(navigationwrapper).stop().animate({left:selected?'0px':slidewidth});$(this).toggleClass('slide-active',!selected);$('#slidemenu').toggleClass('slide-active');});$(document).on("keypress",".deny-enter :input:not(textarea)",function(event){if(event.keyCode==13){event.preventDefault();}});refresh_main();window.setInterval('refresh_main()',$REFRESH_TIME);$('.colorpicker-input').colorpicker();$('.carrousel-fade').each(function(){$(this).carrouselanim();});var clipboard=new Clipboard('.btn-clipboard');clipboard.on('error',function(e){var $trigger=$(e.trigger);alert("Oops! your browser can't copy to clipboard...\u005cnYou need to copy manually:\u005cn\u005cn"+$trigger.data('clipboard-text'));});});var csrftoken=$('meta[name=csrf-token]').attr('content');$.ajaxSetup({beforeSend:function(xhr,settings){if(!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type)&&!this.crossDomain){xhr.setRequestHeader("X-CSRFToken",csrftoken);}}});function refresh_main()\u000a{get_server_instances_online();get_host_localtime();}\u000afunction get_server_instances_online()\u000a{$.post($SCRIPT_ROOT+'/_get_server_instances_online','',function(data){check_server_data(data);if(data['success'])\u000a{var num=data['num'];if(num==0)\u000a$("#badge-num-server-instances").text("0").addClass('hidden');else\u000a$("#badge-num-server-instances").text(num).removeClass('hidden');}});}\u000afunction check_server_data(data)\u000a{if(!data||data==undefined)\u000areturn;if(data['notauth'])\u000a{bootbox.dialog({message:"<p class='text-center' style='color:#800000;'><i class='fa fa-warning'></i> "+$BABEL_STR_SESSION_EXPIRED+" <i class='fa fa-warning'></i></p>",title:$BABEL_STR_TITLE_SESSION_EXPIRED,buttons:{success:{label:"Oh!",className:"btn-default",callback:function(){window.location.reload();}}}});}\u000aelse if(data['error'])\u000a{var errormsg=data['errormsg']?data['errormsg']:$BABEL_STR_INTERNAL_ERROR;bootbox.dialog({message:"<p class='text-center' style='color:#800000;'>"+errormsg+"</p>",title:$BABEL_STR_ERROR_OOOPS+" <i class='fa fa-frown-o'></i>",buttons:{success:{label:$BABEL_STR_DAMN,className:"btn-default"}}});}}\u000afunction get_host_localtime()\u000a{$.post($SCRIPT_ROOT+'/_refresh_host_localtime','',function(data){$("#localtime").text(data['localtime']);});}\u000afunction get_config_value_textarea($ta,param)\u000a{var lines=$ta.splitlines();for(var i in lines)\u000a{var objMatch=lines[i].match(/^([^#\u005cs]+)\u005cs([^#\u005cr\u005cn]+)/);if(objMatch&&param.toLowerCase()===objMatch[1].toLowerCase())\u000areturn objMatch[2];}\u000areturn undefined;}\u000afunction update_config_textarea($ta,param,new_value,defval)\u000a{var lines=$ta.splitlines();var nvalue="";var replaced=false;for(var i in lines)\u000a{var objMatch=lines[i].match(/^([^#\u005cs]+)\u005cs([^#\u005cr\u005cn]+)/);if(objMatch&&param.toLowerCase()===objMatch[1].toLowerCase())\u000a{if((typeof defval==='undefined'&&new_value)||(typeof defval!=='undefined'&&new_value!=defval))\u000a{nvalue+=param+" "+new_value+"\u005cn";}\u000areplaced=true;}\u000aelse\u000anvalue+=lines[i]+"\u005cn";}\u000aif(!replaced&&((typeof defval==='undefined'&&new_value)||(typeof defval!=='undefined'&&new_value!=defval)))\u000a{nvalue+=param+" "+new_value+"\u005cn";}\u000a$ta.val(nvalue);}\u000a$.fn.extend({carrouselanim:function(option){var $this=$(this);function selItem(index,noAnim)\u000a{var $items=$this.data('carrousel-items');var selected=+$this.data('carrousel-sel');if(noAnim)\u000a{$items[selected].css('display','none');$items[index].css({display:'initial',opacity:1});}\u000aelse\u000a{$items[selected].animate({opacity:'0'},function(){$items[selected].css('display','none');});$items[index].css({display:'initial',opacity:0});$items[index].animate({opacity:1});}\u000a$this.data('carrousel-sel',index);};if(typeof(option)==="string")\u000a{switch(option)\u000a{case"next":var $items=$this.data('carrousel-items');var selected=+$this.data('carrousel-sel');if(selected<$items.length-1)\u000aselItem(selected+1);break;case"prev":var selected=+$this.data('carrousel-sel');if(selected>0)\u000aselItem(selected-1);break;}}\u000aelse if(typeof(option)==="integer")\u000a{selItem(option);}\u000aelse\u000a{var $items=[];var count=0;var activedSel=-1;$this.children('.carrousel-fade-list').children('.item').each(function(){var $_this=$(this);$_this.css({display:'none',position:'absolute',width:'100%',left:0});$items.push($_this);if($_this.hasClass('active'))\u000aactivedSel=count;++count;});$this.css({position:'relative'});$this.data('carrousel-items',$items);$this.data('carrousel-sel',0);$items[0].css('display','initial');$this.find('.next').each(function(){$(this).click(function(){$this.carrouselanim('next');return false;})});$this.find('.prev').each(function(){$(this).click(function(){$this.carrouselanim('prev');return false;})});if(activedSel!=-1)\u000aselItem(activedSel,true);}}});$.fn.extend({splitlines:function(){var lines=this.val().split(/\u005cn/);var texts=[];for(var i=0;i<lines.length;i++)\u000a{if(/\u005cS/.test(lines[i]))\u000atexts.push($.trim(lines[i]));}\u000areturn texts;}});function createAnimatedChartDonut(selector,data,chartType)\u000a{var chartData={'labels':data['labels'][chartType],'series':data['series'][chartType]};var chartConfig={donut:true,donutWidth:30,labelOffset:0,labelDirection:'explode'\u000a};var chart=new Chartist.Pie(selector,chartData,chartConfig);chart.on('draw',function(data){if(data.type==='slice'){var pathLength=data.element._node.getTotalLength();var animationDefinition={'stroke-dashoffset':{id:'anim'+data.index,dur:1000,from:-pathLength+'px',to:'0px',easing:Chartist.Svg.Easing.easeOutQuint,fill:'freeze'}};data.element.attr({'stroke-dashoffset':-pathLength+'px','stroke-dasharray':pathLength+'px '+pathLength+'px'});if(data.index!==0)\u000aanimationDefinition['stroke-dashoffset'].begin='anim'+(data.index-1)+'.end';data.element.animate(animationDefinition,false);}});}\u000afunction createAnimatedChartLine(selector,data,chartType)\u000a{var chartData={'labels':data['labels'][chartType],'series':[data['series'][chartType]]};var chartConfig={axisY:{type:Chartist.AutoScaleAxis,onlyInteger:true}};var chart=Chartist.Line(selector,chartData,chartConfig);var seq=0;chart.on('created',function(){seq=0;});chart.on('draw',function(data){if(data.type==='point'){data.element.animate({opacity:{begin:seq++*80,dur:500,from:0,to:1},x1:{begin:seq++*80,dur:500,from:data.x-100,to:data.x,easing:Chartist.Svg.Easing.easeOutQuart}});}});return chart;}
p1
.